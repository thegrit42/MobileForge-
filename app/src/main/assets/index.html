<!DOCTYPE html>
<html><head>
<meta charset="utf-8">
<link rel="stylesheet" href="codemirror.css">
<script src="codemirror.js"></script>
<script src="javascript.js"></script>
<script src="htmlmixed.js"></script>
<script src="css.js"></script>
<style>
html,body {margin:0;padding:0;height:100%;font-family:sans-serif;transition:background 0.3s,color 0.3s;}
#toolbar {height:40px;background:#f0f0f0;border-bottom:1px solid #ccc;display:flex;align-items:center;padding:0 10px;gap:10px;}
#toolbar button {padding:4px 8px;border:1px solid #999;background:#fff;cursor:pointer;border-radius:4px;font-size:12px;}
#toolbar button:active {background:#ddd;}
#fileName {flex:1;padding:4px 8px;border:1px solid #999;border-radius:4px;background:#fff;font-size:14px;}
#status {color:#666;font-size:12px;min-width:80px;text-align:right;}
#editor-container {height:calc(60% - 40px);}
#output {height:40%;border-top:1px solid #ccc;background:#fff;}

body.dark {background:#1e1e1e;color:#d4d4d4;}
body.dark #toolbar {background:#252526;border-bottom:1px solid #3e3e42;}
body.dark #toolbar button {background:#3e3e42;color:#d4d4d4;border:1px solid #555;}
body.dark #toolbar button:active {background:#505050;}
body.dark #fileName {background:#3e3e42;color:#d4d4d4;border:1px solid #555;}
body.dark #status {color:#858585;}
body.dark #output {background:#1e1e1e;border-top:1px solid #3e3e42;}
body.dark .CodeMirror {background:#1e1e1e;color:#d4d4d4;}
body.dark .CodeMirror-gutters {background:#252526;border-right:1px solid #3e3e42;}
body.dark .CodeMirror-linenumber {color:#858585;}
body.dark .CodeMirror-cursor {border-left:1px solid #d4d4d4;}
</style>
</head><body>
<div id="toolbar">
  <button id="darkToggle">üåô</button>
  <input type="text" id="fileName" value="untitled.js" />
  <span id="status">Ready</span>
</div>
<div id="editor-container">
  <textarea id="editor">// Edit JS here
console.log("Mobile Forge v0.1");
alert("Ready");</textarea>
</div>
<iframe id="output" sandbox="allow-scripts"></iframe>
<script>
var editor = CodeMirror.fromTextArea(document.getElementById("editor"), {lineNumbers: true, mode: "javascript", theme: "default"});
var output = document.getElementById("output");
var status = document.getElementById("status");
var fileName = document.getElementById("fileName");

var setStatus = function(msg, color) {
  status.textContent = msg;
  if (color) status.style.color = color;
};

var run = function() {
  setStatus("Running...", "#f90");
  var code = editor.getValue();
  var html = '<html><body><script>' + code + '<\/script></body></html>';
  output.srcdoc = html;
  setTimeout(function() { setStatus("Ready", ""); }, 500);
};

editor.on("change", function() {
  setStatus("Unsaved", "#f90");
  run();
});
run();

var darkToggle = document.getElementById("darkToggle");
var isDark = localStorage.getItem("darkMode") === "true";
if (isDark) {
  document.body.classList.add("dark");
  darkToggle.textContent = "‚òÄÔ∏è";
}
darkToggle.onclick = function() {
  document.body.classList.toggle("dark");
  isDark = document.body.classList.contains("dark");
  localStorage.setItem("darkMode", isDark);
  darkToggle.textContent = isDark ? "‚òÄÔ∏è" : "üåô";
};

fileName.addEventListener("blur", function() {
  setStatus("Saved", "#0a0");
  setTimeout(function() { setStatus("Ready", ""); }, 2000);
});
</script>
</body></html>
